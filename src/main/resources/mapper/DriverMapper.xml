<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.dgwl.dao.DriverDao">


    <select id="selectDriver" resultType="Map">
        select t1.id,t1.name,t1.age,t1.tel,t1.cardId,t1.driveAge,DATE_FORMAT(t1.updateTime,'%Y-%m-%d') as updateTime,
            case when t2.number is null then '未配车' else t2.number end as hasCar
        from driver t1 left join car t2  on (t1.carId = t2.id)
        <if test="name!=null and name !=''">
            and t1.name like '%${name}%'
        </if>
        <if test="driveAge!=null">
            and t1.driveAge >= ${driveAge}
        </if>
    </select>

    <insert id="insertDriver" parameterType="Driver">
        insert into driver(id,name,age,tel,cardId,driveAge,carId)
        values (null,'${name}', ${age}, ${tel}, '${cardId}', ${driveAge}, ${carId} )
    </insert>

</mapper>